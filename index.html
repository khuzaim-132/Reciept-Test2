<!DOCTYPE html>
<html>
<head>
  <title>Employee Management Demo</title>

    <!-- üìÑ jsPDF library -->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

        <style>
            body {
                  font-family: Arial, sans-serif;
                        background: #0f172a;
                              color: white;
                                    padding: 20px;
                                        }
                                            h2 { margin-top: 25px; color: #38bdf8; }

                                                .box {
                                                      max-width: 700px;
                                                            margin: auto;
                                                                  background: #1e293b;
                                                                        padding: 20px;
                                                                              border-radius: 12px;
                                                                                  }

                                                                                      input, select, textarea, button {
                                                                                            width: 100%;
                                                                                                  padding: 10px;
                                                                                                        margin-top: 8px;
                                                                                                              border-radius: 6px;
                                                                                                                    border: none;
                                                                                                                          background: #334155;
                                                                                                                                color: white;
                                                                                                                                    }

                                                                                                                                        textarea { resize: vertical; }

                                                                                                                                            button {
                                                                                                                                                  background: #22d3ee;
                                                                                                                                                        color: black;
                                                                                                                                                              font-weight: bold;
                                                                                                                                                                    cursor: pointer;
                                                                                                                                                                          margin-top: 15px;
                                                                                                                                                                              }

                                                                                                                                                                                  .download-btn {
                                                                                                                                                                                        background: #4ade80;
                                                                                                                                                                                              margin-top: 10px;
                                                                                                                                                                                                  }

                                                                                                                                                                                                      .result {
                                                                                                                                                                                                            background: #020617;
                                                                                                                                                                                                                  padding: 15px;
                                                                                                                                                                                                                        margin-top: 15px;
                                                                                                                                                                                                                              border-radius: 8px;
                                                                                                                                                                                                                                  }

                                                                                                                                                                                                                                      .hidden { display: none; }
                                                                                                                                                                                                                                          .locked { opacity: 0.4; pointer-events: none; }
                                                                                                                                                                                                                                            </style>
                                                                                                                                                                                                                                            </head>

                                                                                                                                                                                                                                            <body>

                                                                                                                                                                                                                                            <div class="box">

                                                                                                                                                                                                                                              <h2>Search Employee (QID)</h2>

                                                                                                                                                                                                                                                <div id="lockMsg" class="result">üîí Admin password required</div>

                                                                                                                                                                                                                                                  <div id="secureArea" class="locked">
                                                                                                                                                                                                                                                      <input id="qid" placeholder="Enter QID">
                                                                                                                                                                                                                                                          <button onclick="search()">Search</button>

                                                                                                                                                                                                                                                              <div id="output"></div>

                                                                                                                                                                                                                                                                  <!-- üì• DOWNLOAD BUTTON -->
                                                                                                                                                                                                                                                                      <button id="downloadBtn" class="download-btn hidden" onclick="downloadPDF()">
                                                                                                                                                                                                                                                                            ‚¨áÔ∏è Download Employee Info (PDF)
                                                                                                                                                                                                                                                                                </button>

                                                                                                                                                                                                                                                                                    <div id="form" class="hidden">

                                                                                                                                                                                                                                                                                          <h2>Employee Basic Details</h2>
                                                                                                                                                                                                                                                                                                <input id="name" placeholder="Employee Name">
                                                                                                                                                                                                                                                                                                      <input id="passport" placeholder="Passport Number">
                                                                                                                                                                                                                                                                                                            <input id="mobile" placeholder="Mobile Number">

                                                                                                                                                                                                                                                                                                                  <h2>Address</h2>
                                                                                                                                                                                                                                                                                                                        <input id="zone" placeholder="Zone No">
                                                                                                                                                                                                                                                                                                                              <input id="building" placeholder="Building No">
                                                                                                                                                                                                                                                                                                                                    <input id="street" placeholder="Street No">

                                                                                                                                                                                                                                                                                                                                          <h2>Attendance</h2>
                                                                                                                                                                                                                                                                                                                                                <select id="attendance" onchange="toggleLeave()">
                                                                                                                                                                                                                                                                                                                                                        <option>Present</option>
                                                                                                                                                                                                                                                                                                                                                                <option>Absent</option>
                                                                                                                                                                                                                                                                                                                                                                        <option>Sick Leave</option>
                                                                                                                                                                                                                                                                                                                                                                              </select>

                                                                                                                                                                                                                                                                                                                                                                                    <div id="leaveBox" class="hidden">
                                                                                                                                                                                                                                                                                                                                                                                            <label>Leave From</label>
                                                                                                                                                                                                                                                                                                                                                                                                    <input id="leaveFrom" type="date">
                                                                                                                                                                                                                                                                                                                                                                                                            <label>Leave To</label>
                                                                                                                                                                                                                                                                                                                                                                                                                    <input id="leaveTo" type="date">
                                                                                                                                                                                                                                                                                                                                                                                                                            <textarea id="leaveReason" placeholder="Leave Reason"></textarea>
                                                                                                                                                                                                                                                                                                                                                                                                                                  </div>

                                                                                                                                                                                                                                                                                                                                                                                                                                        <h2>Salary</h2>
                                                                                                                                                                                                                                                                                                                                                                                                                                              <input id="basicSalary" placeholder="Basic Salary">
                                                                                                                                                                                                                                                                                                                                                                                                                                                    <input id="extra" placeholder="Extra Amount">

                                                                                                                                                                                                                                                                                                                                                                                                                                                          <button onclick="save()">Save / Update</button>
                                                                                                                                                                                                                                                                                                                                                                                                                                                              </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                </div>

                                                                                                                                                                                                                                                                                                                                                                                                                                                                </div>

                                                                                                                                                                                                                                                                                                                                                                                                                                                                <script>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  /* ===== ADMIN SECURITY ===== */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    const ADMIN_PASSWORD = "admin123";

                                                                                                                                                                                                                                                                                                                                                                                                                                                                      window.onload = function () {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                          const pass = prompt("Enter Admin Password:");
                                                                                                                                                                                                                                                                                                                                                                                                                                                                              if (pass === ADMIN_PASSWORD) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    document.getElementById("secureArea").classList.remove("locked");
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          document.getElementById("lockMsg").innerHTML = "‚úÖ Access granted";
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              } else {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    alert("Wrong password ‚ùå");
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          location.reload();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                };

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  let employees = JSON.parse(localStorage.getItem("employees")) || {};
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    let currentEmployee = null;

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      function search() {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          const qid = document.getElementById("qid").value.trim();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              const out = document.getElementById("output");
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  const form = document.getElementById("form");
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      const downloadBtn = document.getElementById("downloadBtn");

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          downloadBtn.classList.add("hidden");

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              if (employees[qid]) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    const e = employees[qid];
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          currentEmployee = { ...e, qid };

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                let leaveInfo = "";
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      if (e.attendance === "Sick Leave") {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              leaveInfo = `<br><b>Leave:</b> ${e.leaveFrom} to ${e.leaveTo}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <br><b>Reason:</b> ${e.leaveReason}`;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               out.innerHTML = `
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <div class="result">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 <b>Name:</b> ${e.name}<br>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <b>QID:</b> ${qid}<br>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     <b>Passport:</b> ${e.passport}<br>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <b>Mobile:</b> ${e.mobile}<br><br>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         <b>Zone:</b> ${e.zone}<br>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <b>Building:</b> ${e.building}<br>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             <b>Street:</b> ${e.street}<br><br>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <b>Attendance:</b> ${e.attendance}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 ${leaveInfo}<br><br>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <b>Basic Salary:</b> ${e.basicSalary}<br>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     <b>Extra:</b> ${e.extra}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   `;

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         downloadBtn.classList.remove("hidden");

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               name.value = e.name;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     passport.value = e.passport;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           mobile.value = e.mobile;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 zone.value = e.zone;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       building.value = e.building;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             street.value = e.street;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   attendance.value = e.attendance;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         basicSalary.value = e.basicSalary;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               extra.value = e.extra;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     leaveFrom.value = e.leaveFrom || "";
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           leaveTo.value = e.leaveTo || "";
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 leaveReason.value = e.leaveReason || "";
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       toggleLeave();

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             form.classList.remove("hidden");

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 } else {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       out.innerHTML = `<div class="result">No record found. Add new below.</div>`;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             clearForm();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   form.classList.remove("hidden");
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           function save() {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               const qid = document.getElementById("qid").value.trim();

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   employees[qid] = {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         name: name.value,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               passport: passport.value,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     mobile: mobile.value,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           zone: zone.value,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 building: building.value,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       street: street.value,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             attendance: attendance.value,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   leaveFrom: leaveFrom.value,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         leaveTo: leaveTo.value,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               leaveReason: leaveReason.value,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     basicSalary: basicSalary.value,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           extra: extra.value
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               };

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   localStorage.setItem("employees", JSON.stringify(employees));
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       alert("Data Saved Successfully");
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           search();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               function clearForm() {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   document.querySelectorAll("#form input, #form textarea").forEach(i => i.value = "");
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       attendance.value = "Present";
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           toggleLeave();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               function toggleLeave() {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   leaveBox.classList.toggle("hidden", attendance.value !== "Sick Leave");
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       /* ===== PDF DOWNLOAD ===== */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         function downloadPDF() {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             if (!currentEmployee) return;

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 const { jsPDF } = window.jspdf;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     const doc = new jsPDF();

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         let y = 10;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             doc.text("Employee Information", 10, y); y += 10;

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 for (let key in currentEmployee) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       doc.text(`${key.toUpperCase()}: ${currentEmployee[key] || ""}`, 10, y);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             y += 8;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     doc.save(`Employee_${currentEmployee.qid}.pdf`);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       </script>

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       </body>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       </html>